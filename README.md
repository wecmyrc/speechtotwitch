# Speech to twitch

–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –Ω–æ–≥

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ [python 3.12](https://www.python.org/downloads/release/python-3124/), [micromamba](https://mamba.readthedocs.io/en/latest/index.html) –≤–æ—Ä–æ—á–∞–µ—Ç –ø–∞–∫–µ—Ç–∞–º–∏:

- [vosk v0.3.45](https://pypi.org/project/vosk/)
- [sounddevice v0.4.7](https://pypi.org/project/sounddevice/)
- [twitch-chat-irc v0.0.4](https://pypi.org/project/twitch-chat-irc/)

### Windows

–≠–∫–∑–µ—à–Ω–∏–∫, —Å–æ–±—Ä–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ [pyinstaller](https://pyinstaller.org/en/stable/), –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –∞—Ä—Ö–∏–≤–µ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º (Windows-build-stt-v101.7z). –ö–∞—á–∞—Ç—å [—Ç—É—Ç](https://github.com/wecmyrc/speechtotwitch/releases/latest).

–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

```
  micromamba create -f env.yml
  micromamba activate mamba-environment
  python stt.py
```

### Linux

–ï—Å–ª–∏ –µ—Å—Ç—å [nix](https://nixos.org/), —Ç–æ:

```
  nix-shell
  python3 stt.py
```

–ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ [—Ä—É—á–Ω–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è windows](#Windows) –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å (–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–¥–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `python3 stt.py`).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–≠—Ç–∞ —à—Ç—É–∫–∞ —Å–ª—É—à–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω –∏ –ª—å–µ—Ç –≤ —á–∞—Ç —Ç–≤–∏—á–∞ –≤—Å–µ, —á—Ç–æ —Å–ª—ã—à–∏—Ç.

–§–∏—á–∏:

- –í—Å–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–µ –ø–∏—à–µ—Ç—Å—è –≤ `messages_logs.txt` (—É—á—Ç–∏ —á—Ç–æ –≤—Ä–µ–º—è –≤ UTC)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ `OAuth` –∫–ª—é—á–µ–π
- –ó–∞–º–µ–Ω–∞ —Å–ª–æ–≤ –ø–æ —Å–ª–æ–≤–∞—Ä—é `dict.txt`

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–≤–æ–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `OAuth` –∫–ª—é—á [–∑–¥–µ—Å—å](https://twitchapps.com/tmi/). –ö–ª—é—á –Ω–µ —Ç–µ—Ä—è–µ–º, –∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±–ª–æ–∫–Ω–æ—Ç–∏–∫ –∏–ª–∏ –≤ —Ñ–∞–π–ª `key.txt` –≤ —Å–ª–µ–¥—é—â–µ–º –≤–∏–¥–µ:

```
  –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  oauth –∫–ª—é—á
```

> [!WARNING]
> –§–∞–π–ª `key.txt` –∂–∏–≤–µ—Ç —Ä—è–¥–æ–º —Å `stt.py/stt.exe` –∏ —Å–ª–µ–¥–∏ —á—Ç–æ–±—ã –Ω–µ –∑–∞–∫—Ä–∞–ª—Å—è –ø—Ä–æ–±–µ–ª –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏!

–ü—Ä–∏—è—Ç–Ω—ã–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É –∏–¥–µ—Ç –≤–æ—Ç —ç—Ç–æ—Ç –ø–∞—Ä–µ–Ω—å - `dict.txt`. –õ–µ–∂–∏—Ç —Ç–∞–º –∂–µ –≥–¥–µ –∏ `key.txt`, –∞ –≤–æ—Ç –µ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:

```
[–∑–∞–ø—è—Ç–∞—è]+=[,]
[—Ç–æ—á–∫–∞]+=[.]
[–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫]+=[?]
[–≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫]+=[!]
[–æ—á–µ–Ω—å –∂–∞—Ä–∫–æ]=[ü•µ]
[—á–µ—Ä—Ç –≤–æ–∑—å–º–∏]=[&!?!]
```

–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∏ —á—Ç–æ –¥–µ–ª–∞–µ—Ç? –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ç—ã —Ö–æ—á–µ—à—å –≤—ã—Å–∫–∞–∑–∞—Ç—å –≤ —á–∞—Ç —Ñ—Ä–∞–∑—É "–æ, —Ç—ã —É–∂–µ –∑–¥–µ—Å—å!". –ü—Ä–æ—Å—Ç–æ —Ç–∞–∫ —ç—Ç–æ–≥–æ –Ω–µ –¥–æ–±–∏—Ç—å—Å—è, –≤–µ–¥—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —É–º–µ–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è. –í –ª—É—á—à–µ–º —Å–ª—É—á–∞–µ —Ç—ã –ø–æ–ª—É—á–∏—à—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "–æ –∑–∞–ø—è—Ç–∞—è —Ç—ã —É–∂–µ –∑–¥–µ—Å—å –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫".

–ò —Ç—É—Ç –Ω–∞ –∞—Ä–µ–Ω—É –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞—à —Ñ–∞–π–ª–∏–∫. –ü—Ä–∏ –ø–æ–º–æ—â–∏ –Ω–µ–≥–æ —Ç—ã –º–æ–∂–µ—à—å —É–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–∞–¥–æ –∑–∞–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ —á–∞—Ç. –§–æ—Ä–º–∞—Ç –ø—Ä–∞–≤–∏–ª –¥–ª—è –∑–∞–º–µ–Ω—ã: `[–∏—Å—Ö–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ]=[–Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ]`.

> [!WARNING]
> –ù–∞ Windows —ç–º–æ–¥–∂–∏ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –∏ –Ω–µ –ø–∏—à—É—Ç—Å—è –≤ –ª–æ–≥, –Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —á–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º. –ü—Ä–∏—á–∏–Ω –Ω–µ –∑–Ω–∞—é –∏ –Ω–µ —Ä–∞–∑–±–∏—Ä–∞–ª—Å—è.

–¢—ã –º–æ–≥ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ñ–∞–π–ª–µ `dict.txt` –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `+=`, –∞ –Ω–µ `=`. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞—Ä–æ—á–Ω–æ. –¢–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ: "–ø—Ä–∏–≤–µ—Ç –∑–∞–ø—è—Ç–∞—è –∫–∞–∫ –ø–æ–≥–æ–¥–∫–∞ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫ —É –º–µ–Ω—è –æ—á–µ–Ω—å –∂–∞—Ä–∫–æ". –†–∞–∑–Ω–∏—Ü–∞ –æ—á–µ–≤–∏–¥–Ω–∞:

|–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `+=`|–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `+=`|
|---|---|
|–ø—Ä–∏–≤–µ—Ç , –∫–∞–∫ –ø–æ–≥–æ–¥–∫–∞ ? —É –º–µ–Ω—è ü•µ|–ø—Ä–∏–≤–µ—Ç, –∫–∞–∫ –ø–æ–≥–æ–¥–∫–∞? —É –º–µ–Ω—è ü•µ|

–¢–∞–∫–∂–µ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –ø–ª–æ—Ö–∏–µ —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —á–∞—Ç —Ç–≤–∏—á–∞.

–ï—Å–ª–∏ —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ –Ω—É–∂–µ–Ω, —Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ç—Ä–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `dict.txt`, –Ω–æ —Å–∞–º —Ñ–∞–π–ª –Ω–µ —É–¥–∞–ª—è–π.

### –ó–∞–ø—É—Å–∫

```
Mic test? (no output to twitch) [y/N]:
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞? –¢—ã –≥–æ–≤–æ—Ä–∏—à—å - –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç, –∞ –≤ —Ç–≤–∏—á –Ω–∏—á–µ–≥–æ –Ω–µ –∏–¥–µ—Ç.

<kbd>y</kbd> - —Ç–µ—Å—Ç–∏—Ä—É–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω

<kbd>Enter</kbd> - –∏–¥–µ–º –¥–∞–ª—å—à–µ

<br>

```
Use key.txt? [Y/n/s]:
```

–ò—Å–ø–æ–ª—å–∑—É–µ–º `key.txt`? –ï—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—à—å `key.txt`, —Ç–æ –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å –∫–ª—é—á. –¢–∞–∫–∂–µ —Ç—ã –º–æ–∂–µ—à—å –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∫–ª—é—á–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –°–≤–æ–∏ —Ñ–∞–π–ª—ã –∫–ª—é—á–µ–π –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ `key.txt` –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

<kbd>Enter</kbd> - –∏—Å–ø–æ–ª—å–∑—É–µ–º `key.txt`

<kbd>n</kbd> - —Ö–æ—á—É –≤—Ä—É—á–Ω—É—é –≤–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ

<kbd>s</kbd> - —Ö–æ—á—É —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª

<br>

```
Channel:
```

–ö–∞–Ω–∞–ª, –∫—É–¥–∞ –±—É–¥—É—Ç –∏–¥—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

<br>

–ß—Ç–æ–±—ã –≤—ã–∫–ª—é—á–∏—Ç—å –Ω–∞–∂–º–∏ <kbd>Ctrl-C</kbd>. –ß—Ç–æ–±—ã –ø–æ–º–µ–Ω—è—Ç—å –∫–∞–Ω–∞–ª –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∏ –≤–≤–µ–¥–∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

–í—Ä–æ–¥–µ –Ω–∞ —ç—Ç–æ–º –≤—Å—ë. –í—Å–µ–º —É–¥–∞—á–∏, —è –ø–æ–≥–Ω–∞–ª üëã üê∏

## Troubleshooting

### –í—ã–ª–µ—Ç–∞–µ—Ç

–ù—É–∂–Ω—ã–π —Ñ–∞–π–ª —Å –∫–ª—é—á–æ–º –Ω–∞ –º–µ—Å—Ç–µ?

<br>

### list index out of range

–ó–∞–ø–æ–ª–Ω–∏ —Ñ–∞–π–ª –∫–ª—é—á–∞

## TODO

- [ ] –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?
- [x] –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∫–ª—é—á–µ–π
- [x] –ø–æ–¥–º–µ–Ω–∞ —Å–ª–æ–≤
- [x] –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
